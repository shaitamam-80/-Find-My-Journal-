# ×ª×•×›× ×™×ª ×¢×‘×•×“×”: ×©×™×¤×•×¨ ×× ×’× ×•×Ÿ × ×™×ª×•×— ×•×–×™×”×•×™ ××•× ×—×™×

## ğŸ¯ ××˜×¨×”
×©×“×¨×•×’ ×× ×’× ×•×Ÿ ×”× ×™×ª×•×— ×•×”×–×™×”×•×™ ×©×œ ××•× ×—×™ ××¤×ª×— ×•× ×•×©××™× ×××××¨×™× ××§×“××™×™×, ×ª×•×š ×©×™×œ×•×‘ OpenAlex ××©×•×¤×¨ + Gemini LLM ×œ××§×¨×™× ××•×¨×›×‘×™×.

---

## ğŸ“Š ××¦×‘ × ×•×›×—×™ vs ××¦×‘ ×¨×¦×•×™

| ×”×™×‘×˜ | ××¦×‘ × ×•×›×—×™ | ××¦×‘ ×¨×¦×•×™ |
|------|-----------|----------|
| ×—×™×œ×•×¥ ××•× ×—×™× | Stopwords + 20 ×‘×™×˜×•×™×™× ×§×‘×•×¢×™× | Keywords ×“×™× ××™×™× ×-OpenAlex + LLM |
| ×–×™×”×•×™ ×ª×—×•××™× | 12 ×ª×—×•××™× hardcoded | 252 subfields ×“×™× ××™×™× |
| ×¨××©×™ ×ª×™×‘×•×ª | ×œ× ××–×•×”×™× | Gemini ××¤×¢× ×— |
| ××××¨×™× ×‘×™×Ÿ-×ª×—×•××™×™× | ×–×™×”×•×™ ×—×œ×§×™ | ×–×™×”×•×™ ××œ× + cross-discipline |
| ×©×¤×•×ª ××—×¨×•×ª | ×× ×’×œ×™×ª ×‘×œ×‘×“ | ×ª××™×›×” ×‘×¢×‘×¨×™×ª + ×©×¤×•×ª × ×•×¡×¤×•×ª |

---

## ğŸ—ï¸ ××¨×›×™×˜×§×˜×•×¨×” ×—×“×©×”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Smart Analysis Engine                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                      â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Layer 1     â”‚    â”‚    Layer 2      â”‚    â”‚    Layer 3      â”‚
â”‚  OpenAlex     â”‚â”€â”€â”€â–ºâ”‚   Analysis      â”‚â”€â”€â”€â–ºâ”‚   Gemini LLM    â”‚
â”‚  Enhanced     â”‚    â”‚   Orchestrator  â”‚    â”‚   Enrichment    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                     â”‚                      â”‚
       â–¼                     â–¼                      â–¼
  â€¢ Topics API          â€¢ Confidence           â€¢ Abbreviations
  â€¢ Keywords from         scoring              â€¢ Missing terms
    Works               â€¢ Trigger              â€¢ Cross-discipline
  â€¢ Concepts              detection            â€¢ Language support
```

---

## ğŸ“… ×©×œ×‘×™ ×‘×™×¦×•×¢

### Phase 1: OpenAlex Enhanced (×©×‘×•×¢ 1-2)
**××˜×¨×”:** ×œ×©×¤×¨ ××ª ×—×™×œ×•×¥ ×”××•× ×—×™× ×•×”× ×•×©××™× ×™×©×™×¨×•×ª ×-OpenAlex

#### Task 1.1: Topics API Direct Integration
**×§×‘×¦×™×:** `backend/app/services/openalex/topics.py` (×—×“×©)

```python
# ×™×¦×™×¨×ª ××•×“×•×œ ×—×“×© ×œ×¢×‘×•×“×” ×™×©×™×¨×” ×¢× Topics API
class TopicsService:
    async def search_topics(query: str) -> List[Topic]
    async def get_topic_hierarchy(topic_id: str) -> TopicHierarchy
    async def find_related_topics(topic_ids: List[str]) -> List[Topic]
```

**×¤×¢×•×œ×•×ª:**
- [ ] ×™×¦×™×¨×ª `topics.py` ×¢× ×¤×•× ×§×¦×™×•×ª ×œ×¢×‘×•×“×” ×™×©×™×¨×” ×¢× Topics API
- [ ] ×”×•×¡×¤×ª ×—×™×¤×•×© Topics ×œ×¤×™ ×˜×§×¡×˜
- [ ] ×©×œ×™×¤×ª ×”×™×¨×¨×›×™×™×ª Topics (Domain â†’ Field â†’ Subfield â†’ Topic)
- [ ] ×‘×“×™×§×•×ª ×™×—×™×“×”

#### Task 1.2: Keywords Extraction from Works
**×§×‘×¦×™×:** `backend/app/services/openalex/keywords.py` (×—×“×©)

```python
# ×—×™×œ×•×¥ Keywords ×-Works ×©×—×–×¨×• ×-OpenAlex
class KeywordsExtractor:
    def extract_from_works(works: List[dict]) -> List[Keyword]
    def merge_with_user_keywords(extracted: List, user: List) -> List
    def rank_keywords(keywords: List) -> List[RankedKeyword]
```

**×¤×¢×•×œ×•×ª:**
- [ ] ×™×¦×™×¨×ª `keywords.py` ×œ×—×™×œ×•×¥ keywords ×-Works
- [ ] ×©×§×œ×•×œ keywords ×œ×¤×™ score ×•×ª×“×™×¨×•×ª
- [ ] ××™×–×•×’ ×¢× ××™×œ×•×ª ×”××¤×ª×— ×©×œ ×”××©×ª××©
- [ ] ×‘×“×™×§×•×ª ×™×—×™×“×”

#### Task 1.3: Concepts Integration
**×§×‘×¦×™×:** `backend/app/services/openalex/concepts.py` (×—×“×©)

```python
# ×©×™××•×© ×‘-x_concepts ×-Works ×œ×©×™×¤×•×¨ ×”×“×™×•×§
class ConceptsAnalyzer:
    def aggregate_concepts(works: List[dict]) -> List[Concept]
    def filter_by_relevance(concepts: List, threshold: float) -> List
```

**×¤×¢×•×œ×•×ª:**
- [ ] ×™×¦×™×¨×ª `concepts.py` ×œ× ×™×ª×•×— concepts
- [ ] ××’×¨×’×¦×™×” ×©×œ concepts ×-Works ×“×•××™×
- [ ] ×¡×™× ×•×Ÿ ×œ×¤×™ relevance score
- [ ] ×‘×“×™×§×•×ª ×™×—×™×“×”

#### Task 1.4: Refactor Search Terms Extraction
**×§×‘×¦×™×:** `backend/app/services/openalex/utils.py`

**×¤×¢×•×œ×•×ª:**
- [ ] ×”×¡×¨×ª stopwords ×‘×¢×™×™×ª×™×™× ("analysis", "method", "results")
- [ ] ×”×•×¡×¤×ª ×–×™×”×•×™ bigrams/trigrams ××•×˜×•××˜×™
- [ ] ×©×™×œ×•×‘ keywords ×-OpenAlex
- [ ] ×¢×“×›×•×Ÿ ×‘×“×™×§×•×ª

---

### Phase 2: Analysis Orchestrator (×©×‘×•×¢ 2-3)
**××˜×¨×”:** ×‘× ×™×™×ª ×× ×’× ×•×Ÿ ×ª×–××•×¨ ×©××—×œ×™×˜ ××ª×™ ×œ×”×¤×¢×™×œ LLM

#### Task 2.1: Create SmartAnalyzer Class
**×§×‘×¦×™×:** `backend/app/services/analysis/smart_analyzer.py` (×—×“×©)

```python
@dataclass
class AnalysisResult:
    keywords: List[RankedKeyword]
    topics: List[DetectedTopic]
    disciplines: List[DetectedDiscipline]
    confidence: float
    needs_llm_enrichment: bool
    enrichment_reasons: List[str]

class SmartAnalyzer:
    """
    Main orchestrator for paper analysis.
    Combines OpenAlex + optional Gemini enrichment.
    """

    async def analyze(
        self,
        title: str,
        abstract: str,
        user_keywords: List[str] = None,
    ) -> AnalysisResult:
        # Step 1: OpenAlex analysis
        # Step 2: Confidence scoring
        # Step 3: LLM trigger detection
        # Step 4: Optional Gemini enrichment
        pass
```

**×¤×¢×•×œ×•×ª:**
- [ ] ×™×¦×™×¨×ª `smart_analyzer.py`
- [ ] ×”×’×“×¨×ª `AnalysisResult` dataclass
- [ ] ××™××•×© ×œ×•×’×™×§×ª ×”×ª×–××•×¨
- [ ] ×‘×“×™×§×•×ª ×™×—×™×“×”

#### Task 2.2: Confidence Scoring System
**×§×‘×¦×™×:** `backend/app/services/analysis/confidence.py` (×—×“×©)

```python
class ConfidenceScorer:
    """
    Calculate confidence in analysis results.
    Used to decide if LLM enrichment is needed.
    """

    def score(self, result: OpenAlexResult) -> ConfidenceScore:
        factors = {
            "topics_found": len(result.topics) >= 3,
            "keywords_quality": self._assess_keyword_quality(result.keywords),
            "discipline_clarity": result.top_discipline_confidence > 0.4,
            "works_found": result.similar_works_count >= 20,
        }
        return ConfidenceScore(...)
```

**×¤×¢×•×œ×•×ª:**
- [ ] ×™×¦×™×¨×ª `confidence.py`
- [ ] ×”×’×“×¨×ª ×§×¨×™×˜×¨×™×•× ×™× ×œ×‘×™×˜×—×•×Ÿ
- [ ] ××™××•×© ×—×™×©×•×‘ confidence score
- [ ] ×‘×“×™×§×•×ª ×™×—×™×“×”

#### Task 2.3: LLM Trigger Detection
**×§×‘×¦×™×:** `backend/app/services/analysis/triggers.py` (×—×“×©)

```python
class LLMTriggerDetector:
    """
    Detect when LLM enrichment is needed.
    """

    TRIGGERS = [
        "low_confidence",           # confidence < 0.5
        "abbreviations_detected",   # OAB, COPD, etc.
        "cross_disciplinary",       # Multiple distinct fields
        "non_english",              # Hebrew, Arabic, etc.
        "few_topics",               # < 2 topics found
        "ambiguous_terms",          # Terms with multiple meanings
    ]

    def detect(
        self,
        text: str,
        openalex_result: OpenAlexResult,
    ) -> List[TriggerResult]:
        pass
```

**×¤×¢×•×œ×•×ª:**
- [ ] ×™×¦×™×¨×ª `triggers.py`
- [ ] ××™××•×© ×›×œ trigger ×‘× ×¤×¨×“
- [ ] ×‘×“×™×§×•×ª ×œ×›×œ trigger

---

### Phase 3: Gemini LLM Enrichment (×©×‘×•×¢ 3-4)
**××˜×¨×”:** ×”×•×¡×¤×ª ×©×›×‘×ª Gemini ×œ× ×™×ª×•×— ××ª×§×“×

#### Task 3.1: Paper Analysis Prompt
**×§×‘×¦×™×:** `backend/app/services/gemini/prompts.py`

```python
PAPER_ANALYSIS_PROMPT = """
You are an academic paper analyzer. Extract key information from this paper.

TITLE: {title}
ABSTRACT: {abstract}

Respond with valid JSON only:
{{
  "primary_field": "string - main academic field",
  "subfields": ["array of specific subfields"],
  "key_terms": ["max 10 important technical terms"],
  "methodology": "RCT|cohort|meta-analysis|qualitative|case-study|review|other",
  "abbreviations": {{"abbr": "full form"}},
  "cross_disciplinary": boolean,
  "cross_disciplines": ["if cross_disciplinary, list the fields"],
  "language_detected": "en|he|ar|...",
  "suggested_search_queries": ["2-3 optimized search queries for finding journals"]
}}

Rules:
1. Only extract what's explicitly stated or clearly implied
2. Do NOT hallucinate or invent terms
3. Expand ALL abbreviations you recognize
4. Be concise and precise
"""
```

**×¤×¢×•×œ×•×ª:**
- [ ] ×”×•×¡×¤×ª `PAPER_ANALYSIS_PROMPT`
- [ ] ×”×•×¡×¤×ª `ABBREVIATION_EXPANSION_PROMPT` (×§×¦×¨ ×™×•×ª×¨, ×–×•×œ ×™×•×ª×¨)
- [ ] ×‘×“×™×§×•×ª ×¢× ××××¨×™× ×œ×“×•×’××”

#### Task 3.2: Gemini Analysis Service
**×§×‘×¦×™×:** `backend/app/services/gemini/analysis.py` (×—×“×©)

```python
class GeminiAnalysisService:
    """
    Gemini-based paper analysis for complex cases.
    """

    async def analyze_paper(
        self,
        title: str,
        abstract: str,
    ) -> GeminiAnalysisResult:
        """Full paper analysis - use sparingly."""
        pass

    async def expand_abbreviations(
        self,
        text: str,
        abbreviations: List[str],
    ) -> Dict[str, str]:
        """Lightweight abbreviation expansion."""
        pass

    async def detect_cross_disciplines(
        self,
        title: str,
        abstract: str,
        detected_disciplines: List[str],
    ) -> List[CrossDisciplineResult]:
        """Identify cross-disciplinary aspects."""
        pass
```

**×¤×¢×•×œ×•×ª:**
- [ ] ×™×¦×™×¨×ª `analysis.py` ×ª×—×ª gemini
- [ ] ××™××•×© `analyze_paper`
- [ ] ××™××•×© `expand_abbreviations`
- [ ] ××™××•×© `detect_cross_disciplines`
- [ ] ×”×•×¡×¤×ª caching (×›××• ×‘-explanation)
- [ ] ×‘×“×™×§×•×ª ×™×—×™×“×”

#### Task 3.3: Abbreviation Detection
**×§×‘×¦×™×:** `backend/app/services/analysis/abbreviations.py` (×—×“×©)

```python
class AbbreviationDetector:
    """
    Detect academic abbreviations that need expansion.
    """

    # Common patterns: ALL CAPS 2-6 letters
    PATTERN = r'\b[A-Z]{2,6}\b'

    # Known abbreviations (no need for LLM)
    KNOWN = {
        "RCT": "Randomized Controlled Trial",
        "COPD": "Chronic Obstructive Pulmonary Disease",
        "BMI": "Body Mass Index",
        # ... more
    }

    def detect(self, text: str) -> List[Abbreviation]:
        """Find abbreviations in text."""
        pass

    def expand_known(self, abbrs: List[str]) -> Dict[str, str]:
        """Expand known abbreviations without LLM."""
        pass

    def get_unknown(self, abbrs: List[str]) -> List[str]:
        """Get abbreviations that need LLM expansion."""
        pass
```

**×¤×¢×•×œ×•×ª:**
- [ ] ×™×¦×™×¨×ª `abbreviations.py`
- [ ] ×‘× ×™×™×ª ×××’×¨ ×¨××©×™ ×ª×™×‘×•×ª × ×¤×•×¦×™×
- [ ] ××™××•×© ×–×™×”×•×™ ×•××™×•×Ÿ
- [ ] ×‘×“×™×§×•×ª ×™×—×™×“×”

---

### Phase 4: Integration & Testing (×©×‘×•×¢ 4-5)
**××˜×¨×”:** ×©×™×œ×•×‘ ×›×œ ×”×¨×›×™×‘×™× ×•×‘×“×™×§×•×ª ××§×™×¤×•×ª

#### Task 4.1: Update Search Flow
**×§×‘×¦×™×:** `backend/app/services/openalex/search.py`

```python
# ×¢×“×›×•×Ÿ search_journals_by_text ×œ×”×©×ª××© ×‘-SmartAnalyzer
async def search_journals_by_text(
    title: str,
    abstract: str,
    keywords: List[str] = None,
    prefer_open_access: bool = False,
) -> SearchResult:
    # Step 1: Smart Analysis (OpenAlex + optional Gemini)
    analyzer = SmartAnalyzer()
    analysis = await analyzer.analyze(title, abstract, keywords)

    # Step 2: Use enriched data for journal search
    # ...
```

**×¤×¢×•×œ×•×ª:**
- [ ] ×¢×“×›×•×Ÿ `search_journals_by_text`
- [ ] ×©×™×œ×•×‘ `SmartAnalyzer`
- [ ] ×¢×“×›×•×Ÿ Response model ×¢× ××™×“×¢ × ×•×¡×£
- [ ] ×‘×“×™×§×•×ª ××™× ×˜×’×¨×¦×™×”

#### Task 4.2: API Response Enhancement
**×§×‘×¦×™×:** `backend/app/models/journal.py`

```python
class AnalysisMetadata(BaseModel):
    """Metadata about the analysis process."""
    keywords_extracted: List[str]
    topics_detected: List[str]
    disciplines: List[DetectedDisciplineInfo]
    confidence_score: float
    llm_used: bool
    llm_triggers: List[str] = []
    abbreviations_expanded: Dict[str, str] = {}
    processing_time_ms: int
```

**×¤×¢×•×œ×•×ª:**
- [ ] ×”×•×¡×¤×ª `AnalysisMetadata` model
- [ ] ×¢×“×›×•×Ÿ `SearchResponse` ×œ×›×œ×•×œ metadata
- [ ] ×¢×“×›×•×Ÿ API endpoint
- [ ] ×¢×“×›×•×Ÿ ×ª×™×¢×•×“ API

#### Task 4.3: Comprehensive Testing
**×§×‘×¦×™×:** `backend/tests/test_smart_analysis.py` (×—×“×©)

```python
# Test cases:
# 1. Simple English paper - OpenAlex only
# 2. Paper with abbreviations - LLM triggered
# 3. Cross-disciplinary paper - LLM triggered
# 4. Hebrew abstract - LLM triggered
# 5. High confidence - no LLM
# 6. Low confidence - LLM triggered
# 7. Performance benchmark
```

**×¤×¢×•×œ×•×ª:**
- [ ] ×™×¦×™×¨×ª test suite ××§×™×£
- [ ] ×‘×“×™×§×•×ª ×œ×›×œ trigger
- [ ] ×‘×“×™×§×•×ª ×‘×™×¦×•×¢×™×
- [ ] ×‘×“×™×§×•×ª ×¢×œ×•×ª (mock Gemini calls)

---

### Phase 5: Monitoring & Optimization (×©×‘×•×¢ 5-6)
**××˜×¨×”:** ××¢×§×‘, ××•×¤×˜×™××™×–×¦×™×” ×•×©×™×¤×•×¨ ××ª××™×“

#### Task 5.1: Analytics & Logging
**×§×‘×¦×™×:** `backend/app/services/analysis/analytics.py` (×—×“×©)

```python
class AnalysisAnalytics:
    """Track analysis performance and costs."""

    async def log_analysis(
        self,
        result: AnalysisResult,
        processing_time: float,
        llm_used: bool,
    ):
        pass

    async def get_stats(self, days: int = 7) -> AnalyticsReport:
        """Get usage statistics."""
        pass
```

**×¤×¢×•×œ×•×ª:**
- [ ] ×™×¦×™×¨×ª ×˜×‘×œ×ª analytics ×‘-Supabase
- [ ] ××™××•×© logging
- [ ] ×“×©×‘×•×¨×“ ×¡×˜×˜×™×¡×˜×™×§×•×ª

#### Task 5.2: Cost Monitoring
**×§×‘×¦×™×:** `backend/app/services/gemini/cost_tracker.py` (×—×“×©)

```python
class GeminiCostTracker:
    """Track Gemini API usage and costs."""

    # Gemini Flash pricing (as of Jan 2025)
    COST_PER_1K_INPUT_TOKENS = 0.000075
    COST_PER_1K_OUTPUT_TOKENS = 0.0003

    async def track_call(self, input_tokens: int, output_tokens: int):
        pass

    async def get_daily_cost(self) -> float:
        pass

    async def check_budget(self, daily_limit: float = 10.0) -> bool:
        pass
```

**×¤×¢×•×œ×•×ª:**
- [ ] ××™××•×© ××¢×§×‘ ×¢×œ×•×™×•×ª
- [ ] ×”×’×“×¨×ª ×”×ª×¨××•×ª ×¢×œ ×—×¨×™×’×”
- [ ] ×“×©×‘×•×¨×“ ×¢×œ×•×™×•×ª

#### Task 5.3: Feature Flags
**×§×‘×¦×™×:** `backend/app/core/config.py`

```python
# ×”×•×¡×¤×” ×œ-Settings
class Settings(BaseSettings):
    # ... existing

    # Smart Analysis settings
    smart_analysis_enabled: bool = True
    smart_analysis_llm_enabled: bool = True
    smart_analysis_confidence_threshold: float = 0.5
    smart_analysis_daily_llm_budget: float = 10.0  # USD
```

**×¤×¢×•×œ×•×ª:**
- [ ] ×”×•×¡×¤×ª feature flags
- [ ] ××™××•×© on/off ×œ×›×œ ×¨×›×™×‘
- [ ] ×ª×™×¢×•×“

---

## ğŸ“ ××‘× ×” ×§×‘×¦×™× ×—×“×©

```
backend/app/services/
â”œâ”€â”€ analysis/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ smart_analyzer.py      # NEW - Main orchestrator
â”‚   â”œâ”€â”€ confidence.py          # NEW - Confidence scoring
â”‚   â”œâ”€â”€ triggers.py            # NEW - LLM trigger detection
â”‚   â”œâ”€â”€ abbreviations.py       # NEW - Abbreviation handling
â”‚   â”œâ”€â”€ analytics.py           # NEW - Usage analytics
â”‚   â”œâ”€â”€ article_type_detector.py
â”‚   â”œâ”€â”€ discipline_detector.py
â”‚   â”œâ”€â”€ hybrid_detector.py
â”‚   â”œâ”€â”€ topic_validator.py
â”‚   â””â”€â”€ universal_detector.py
â”‚
â”œâ”€â”€ gemini/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ service.py             # Existing - explanations
â”‚   â”œâ”€â”€ analysis.py            # NEW - Paper analysis
â”‚   â”œâ”€â”€ prompts.py             # Updated - new prompts
â”‚   â””â”€â”€ cost_tracker.py        # NEW - Cost monitoring
â”‚
â”œâ”€â”€ openalex/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ client.py
â”‚   â”œâ”€â”€ config.py
â”‚   â”œâ”€â”€ constants.py
â”‚   â”œâ”€â”€ journals.py
â”‚   â”œâ”€â”€ scoring.py
â”‚   â”œâ”€â”€ search.py              # Updated - use SmartAnalyzer
â”‚   â”œâ”€â”€ service.py
â”‚   â”œâ”€â”€ universal_search.py
â”‚   â”œâ”€â”€ utils.py               # Updated - better term extraction
â”‚   â”œâ”€â”€ topics.py              # NEW - Direct Topics API
â”‚   â”œâ”€â”€ keywords.py            # NEW - Keywords extraction
â”‚   â””â”€â”€ concepts.py            # NEW - Concepts analysis
```

---

## ğŸ“Š ××˜×¨×™×§×•×ª ×”×¦×œ×—×”

| ××˜×¨×™×§×” | ×™×¢×“ | ××™×š × ××“×•×“ |
|--------|-----|-----------|
| ×“×™×•×§ ×–×™×”×•×™ ×ª×—×•××™× | >85% | ×‘×“×™×§×” ×™×“× ×™×ª ×¢×œ 100 ××××¨×™× |
| ×›×™×¡×•×™ ×ª×—×•××™× | 252 subfields | ×‘×“×™×§×ª ×ª××™×›×” ×‘×›×œ ×”×ª×—×•××™× |
| ×–××Ÿ ×ª×’×•×‘×” (×‘×œ×™ LLM) | <2 ×©× ×™×•×ª | ××“×™×“×ª p95 |
| ×–××Ÿ ×ª×’×•×‘×” (×¢× LLM) | <5 ×©× ×™×•×ª | ××“×™×“×ª p95 |
| ××—×•×– ×§×¨×™××•×ª LLM | <25% | ××¢×§×‘ analytics |
| ×¢×œ×•×ª LLM ×™×•××™×ª | <$5 | ××¢×§×‘ cost tracker |
| ×©×‘×™×¢×•×ª ×¨×¦×•×Ÿ | >4/5 | feedback ××”××©×ª××©×™× |

---

## âš ï¸ ×¡×™×›×•× ×™× ×•××™×˜×™×’×¦×™×”

| ×¡×™×›×•×Ÿ | ×”×¡×ª×‘×¨×•×ª | ×”×©×¤×¢×” | ××™×˜×™×’×¦×™×” |
|-------|---------|--------|----------|
| ×¢×œ×•×™×•×ª Gemini ×’×‘×•×”×•×ª | ×‘×™× ×•× ×™×ª | ×’×‘×•×”×” | Budget limits + triggers ×—×›××™× |
| Latency ×’×‘×•×” | ×‘×™× ×•× ×™×ª | ×‘×™× ×•× ×™×ª | Caching + async |
| OpenAlex downtime | × ××•×›×” | ×’×‘×•×”×” | Fallback ×œ-keyword detection |
| Gemini hallucinations | ×‘×™× ×•× ×™×ª | ×‘×™× ×•× ×™×ª | Validation + temperature × ××•×š |
| ×©×™× ×•×™×™ API | × ××•×›×” | ×‘×™× ×•× ×™×ª | Version pinning + monitoring |

---

## ğŸš€ ×œ×•×— ×–×× ×™× ××¡×›×

| ×©×‘×•×¢ | Phase | ××©×™××•×ª ×¢×™×§×¨×™×•×ª |
|------|-------|-----------------|
| 1-2 | Phase 1 | OpenAlex Enhanced (Topics, Keywords, Concepts) |
| 2-3 | Phase 2 | Analysis Orchestrator (SmartAnalyzer, Confidence, Triggers) |
| 3-4 | Phase 3 | Gemini LLM Enrichment |
| 4-5 | Phase 4 | Integration & Testing |
| 5-6 | Phase 5 | Monitoring & Optimization |

---

## ğŸ—‘ï¸ Phase 0: × ×™×§×•×™ ×§×•×“ ×™×©×Ÿ (×œ×¤× ×™ ×”×ª×—×œ×ª ×”×¤×™×ª×•×—!)

**×—×©×•×‘ ×××•×“:** ×œ×¤× ×™ ×©××ª×—×™×œ×™× ×œ×‘× ×•×ª ××ª ×”××¨×›×™×˜×§×˜×•×¨×” ×”×—×“×©×”, ×™×© ×œ××—×•×§ ××ª ×”×§×•×“ ×”×™×©×Ÿ ×›×“×™ ×œ×× ×•×¢ ×›×¤×™×œ×•×™×•×ª ×•×‘×œ×‘×•×œ.

### ×§×‘×¦×™× ×œ××—×™×§×” ××œ××”

| ×§×•×‘×¥ | ×¡×™×‘×” ×œ××—×™×§×” |
|------|-------------|
| `backend/app/services/openalex_service.py` | Deprecated wrapper - ××•×—×œ×£ ×‘-SmartAnalyzer |
| `backend/app/services/analysis/discipline_detector.py` | ×¨×©×™××•×ª hardcoded - ××•×—×œ×£ ×‘-OpenAlex Topics API |
| `backend/app/services/analysis/hybrid_detector.py` | ×œ×•×’×™×§×” ×™×©× ×” - ××•×—×œ×£ ×‘-SmartAnalyzer |
| `backend/app/services/analysis/universal_detector.py` | ××•×—×œ×£ ×‘-Topics API ×™×©×™×¨ |
| `backend/app/services/analysis/dynamic_stats.py` | ×œ×‘×“×•×§ ×× ×‘×©×™××•×© - ×× ×œ×, ×œ××—×•×§ |

### ×§×‘×¦×™× ×œ×¢×“×›×•×Ÿ (×”×¡×¨×ª ×§×•×“ ××ª)

| ×§×•×‘×¥ | ××” ×œ×”×¡×™×¨ |
|------|----------|
| `backend/app/services/openalex/constants.py` | `DISCIPLINE_KEYWORDS` - ×¨×©×™××•×ª hardcoded ×©×œ 12 ×ª×—×•××™× |
| `backend/app/services/openalex/constants.py` | `RELEVANT_TOPIC_KEYWORDS` - ×¨×©×™××•×ª ×¡×˜×˜×™×•×ª |
| `backend/app/services/openalex/constants.py` | `KEY_JOURNALS_BY_DISCIPLINE` - ×¨×©×™××•×ª ×›"×¢ ×§×‘×•×¢×•×ª |
| `backend/app/services/openalex/utils.py` | `STOPWORDS` - ×œ×”×—×œ×™×£ ×‘×¨×©×™××” ×—×›××” ×™×•×ª×¨ |
| `backend/app/services/openalex/utils.py` | `important_phrases` - ×¨×©×™××ª 20 ×‘×™×˜×•×™×™× ×§×‘×•×¢×™× |
| `backend/app/services/openalex/utils.py` | `detect_discipline()` - ×¤×•× ×§×¦×™×” ×™×©× ×” |

### ×§×‘×¦×™× ×œ×©××™×¨×” (×‘×©×™××•×© ×¤×¢×™×œ)

| ×§×•×‘×¥ | ×¡×™×‘×” ×œ×©××™×¨×” |
|------|-------------|
| `backend/app/services/openalex/client.py` | âœ… OpenAlex API client - ×‘×¡×™×¡ ×˜×•×‘ |
| `backend/app/services/openalex/search.py` | âœ… ×œ×•×’×™×§×ª ×—×™×¤×•×© ×›"×¢ - ×œ×¢×“×›×Ÿ ×œ×©×™××•×© ×‘-SmartAnalyzer |
| `backend/app/services/openalex/scoring.py` | âœ… ××œ×’×•×¨×™×ª× ×“×™×¨×•×’ - ×œ×©××•×¨ ×•×œ×©×¤×¨ |
| `backend/app/services/openalex/journals.py` | âœ… ×”××¨×ª × ×ª×•× ×™× - ×‘×¡×“×¨ |
| `backend/app/services/analysis/article_type_detector.py` | âœ… ×–×™×”×•×™ ×¡×•×’ ××××¨ - ×©×™××•×©×™ |
| `backend/app/services/analysis/topic_validator.py` | âœ… ×•×œ×™×“×¦×™×” - ×©×™××•×©×™ |
| `backend/app/services/gemini/service.py` | âœ… Gemini explanations - ×§×™×™× ×•×¢×•×‘×“ |

### ×ª×”×œ×™×š ×”× ×™×§×•×™

```
×©×œ×‘ 0.1: ×’×™×‘×•×™
â”œâ”€â”€ ×œ×™×¦×•×¨ branch ×—×“×©: feature/smart-analysis
â”œâ”€â”€ ×œ×ª×¢×“ ××ª ××‘× ×” ×”×§×‘×¦×™× ×”× ×•×›×—×™
â””â”€â”€ ×œ×•×•×“× ×©×™×© ×’×™×‘×•×™ ××œ×

×©×œ×‘ 0.2: ××—×™×§×ª ×§×‘×¦×™×
â”œâ”€â”€ ×œ××—×•×§ ××ª ×”×§×‘×¦×™× ×”××™×•×¢×“×™× ×œ××—×™×§×”
â”œâ”€â”€ ×œ×”×¡×™×¨ imports ××™×•×ª×¨×™×
â””â”€â”€ ×œ×¢×“×›×Ÿ __init__.py files

×©×œ×‘ 0.3: ×¢×“×›×•×Ÿ references
â”œâ”€â”€ ×œ×—×¤×© ××ª ×›×œ ×”-imports ×©×œ ×”×§×‘×¦×™× ×©× ××—×§×•
â”œâ”€â”€ ×œ×¢×“×›×Ÿ ××• ×œ×”×¡×™×¨ references
â””â”€â”€ ×œ×•×•×“× ×©×”×§×•×“ ×¢×“×™×™×Ÿ ××ª×§××¤×œ

×©×œ×‘ 0.4: × ×™×§×•×™ ×§×•×“ ××ª ×‘×§×‘×¦×™× ×§×™×™××™×
â”œâ”€â”€ ×œ×”×¡×™×¨ ×¤×•× ×§×¦×™×•×ª ×©×œ× ×‘×©×™××•×©
â”œâ”€â”€ ×œ×”×¡×™×¨ constants ××™×•×ª×¨×™×
â””â”€â”€ ×œ×”×¡×™×¨ comments ×¢×œ ×§×•×“ ×™×©×Ÿ

×©×œ×‘ 0.5: ×‘×“×™×§×•×ª
â”œâ”€â”€ ×œ×”×¨×™×¥ ××ª ×›×œ ×”×˜×¡×˜×™×
â”œâ”€â”€ ×œ×ª×§×Ÿ ×˜×¡×˜×™× ×©× ×©×‘×¨×•
â””â”€â”€ ×œ××—×•×§ ×˜×¡×˜×™× ×©×œ ×§×•×“ ×©× ××—×§
```

### Checklist ×œ× ×™×§×•×™

- [ ] ×’×™×‘×•×™ ×”×§×•×“ ×”× ×•×›×—×™ (branch/tag)
- [ ] ××—×™×§×ª `openalex_service.py`
- [ ] ××—×™×§×ª `discipline_detector.py`
- [ ] ××—×™×§×ª `hybrid_detector.py`
- [ ] ××—×™×§×ª `universal_detector.py`
- [ ] ×‘×“×™×§×” ×•××—×™×§×ª `dynamic_stats.py` (×× ×œ× ×‘×©×™××•×©)
- [ ] × ×™×§×•×™ `constants.py` ××¨×©×™××•×ª hardcoded
- [ ] × ×™×§×•×™ `utils.py` ××¤×•× ×§×¦×™×•×ª ×™×©× ×•×ª
- [ ] ×¢×“×›×•×Ÿ ×›×œ ×”-imports ×‘×¤×¨×•×™×§×˜
- [ ] ×¢×“×›×•×Ÿ `__init__.py` files
- [ ] ×”×¨×¦×ª ×˜×¡×˜×™× ×•×ª×™×§×•×Ÿ ×©×‘×™×¨×•×ª
- [ ] ××—×™×§×ª ×˜×¡×˜×™× ×©×œ ×§×•×“ ×©× ××—×§
- [ ] Code review ×œ×•×•×“× ×©×œ× × ×©××¨ ×§×•×“ ××ª

### âš ï¸ ××–×”×¨×•×ª ×—×©×•×‘×•×ª

1. **×œ× ×œ××—×•×§ ×œ×¤× ×™ ×©×™×© ×ª×—×œ×™×£ ×¢×•×‘×“** - Phase 0 ××ª×‘×¦×¢ ×‘××§×‘×™×œ ×œ-Phase 1
2. **×œ×©××•×¨ ×¢×œ backward compatibility ×‘-API** - ×¨×§ ×”×§×•×“ ×”×¤× ×™××™ ××©×ª× ×”
3. **×œ×ª×¢×“ ×›×œ ×©×™× ×•×™** - ×œ×”×•×¡×™×£ ×”×¢×¨×•×ª ×‘-commit messages
4. **×œ×‘×“×•×§ ×ª×œ×•×™×•×ª** - ×œ×•×•×“× ×©××£ ×§×•×‘×¥ ××—×¨ ×œ× ×ª×œ×•×™ ×‘×§×•×“ ×©× ××—×§

---

## ğŸ“ ××‘× ×” ×§×‘×¦×™× - ×œ×¤× ×™ ×•××—×¨×™

### ×œ×¤× ×™ (××¦×‘ × ×•×›×—×™)
```
backend/app/services/
â”œâ”€â”€ analysis/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ article_type_detector.py  âœ… × ×©××¨
â”‚   â”œâ”€â”€ discipline_detector.py    âŒ × ××—×§
â”‚   â”œâ”€â”€ dynamic_stats.py          â“ ×œ×‘×“×•×§
â”‚   â”œâ”€â”€ hybrid_detector.py        âŒ × ××—×§
â”‚   â”œâ”€â”€ topic_validator.py        âœ… × ×©××¨
â”‚   â””â”€â”€ universal_detector.py     âŒ × ××—×§
â”‚
â”œâ”€â”€ openalex/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ client.py                 âœ… × ×©××¨
â”‚   â”œâ”€â”€ config.py                 âœ… × ×©××¨
â”‚   â”œâ”€â”€ constants.py              ğŸ”„ ×× ×•×§×”
â”‚   â”œâ”€â”€ journals.py               âœ… × ×©××¨
â”‚   â”œâ”€â”€ scoring.py                âœ… × ×©××¨
â”‚   â”œâ”€â”€ search.py                 ğŸ”„ ××¢×•×“×›×Ÿ
â”‚   â”œâ”€â”€ service.py                âœ… × ×©××¨
â”‚   â”œâ”€â”€ universal_search.py       â“ ×œ×‘×“×•×§
â”‚   â””â”€â”€ utils.py                  ğŸ”„ ×× ×•×§×”
â”‚
â”œâ”€â”€ openalex_service.py           âŒ × ××—×§
â””â”€â”€ ...
```

### ××—×¨×™ (××¦×‘ ×¡×•×¤×™)
```
backend/app/services/
â”œâ”€â”€ analysis/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ smart_analyzer.py         ğŸ†• ×—×“×© - Main orchestrator
â”‚   â”œâ”€â”€ confidence.py             ğŸ†• ×—×“×©
â”‚   â”œâ”€â”€ triggers.py               ğŸ†• ×—×“×©
â”‚   â”œâ”€â”€ abbreviations.py          ğŸ†• ×—×“×©
â”‚   â”œâ”€â”€ analytics.py              ğŸ†• ×—×“×©
â”‚   â”œâ”€â”€ article_type_detector.py  âœ… ×§×™×™×
â”‚   â””â”€â”€ topic_validator.py        âœ… ×§×™×™×
â”‚
â”œâ”€â”€ openalex/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ client.py                 âœ… ×§×™×™×
â”‚   â”œâ”€â”€ config.py                 âœ… ×§×™×™×
â”‚   â”œâ”€â”€ constants.py              ğŸ”„ ×× ×•×§×” (×¨×§ ×§×‘×•×¢×™× ×”×›×¨×—×™×™×)
â”‚   â”œâ”€â”€ journals.py               âœ… ×§×™×™×
â”‚   â”œâ”€â”€ scoring.py                âœ… ×§×™×™×
â”‚   â”œâ”€â”€ search.py                 ğŸ”„ ××¢×•×“×›×Ÿ (××©×ª××© ×‘-SmartAnalyzer)
â”‚   â”œâ”€â”€ service.py                âœ… ×§×™×™×
â”‚   â”œâ”€â”€ utils.py                  ğŸ”„ ×× ×•×§×”
â”‚   â”œâ”€â”€ topics.py                 ğŸ†• ×—×“×© - Topics API
â”‚   â”œâ”€â”€ keywords.py               ğŸ†• ×—×“×© - Keywords extraction
â”‚   â””â”€â”€ concepts.py               ğŸ†• ×—×“×© - Concepts analysis
â”‚
â”œâ”€â”€ gemini/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ service.py                âœ… ×§×™×™×
â”‚   â”œâ”€â”€ analysis.py               ğŸ†• ×—×“×©
â”‚   â”œâ”€â”€ prompts.py                ğŸ”„ ××¢×•×“×›×Ÿ
â”‚   â””â”€â”€ cost_tracker.py           ğŸ†• ×—×“×©
```

---

## ğŸ“ ×”×¢×¨×•×ª × ×•×¡×¤×•×ª

1. **NO Backwards Compatibility ×‘×§×•×“ ×¤× ×™××™** - ××—×œ×™×¤×™× ×œ×’××¨×™, ×œ× ×©×•××¨×™× ×§×•×“ ×™×©×Ÿ
2. **API Backwards Compatibility** - ×”-API ×”×—×™×¦×•× ×™ × ×©××¨ ×ª×•××, ×¨×§ ××•×¡×™×¤×™× ×©×“×•×ª
3. **Gradual Rollout** - Feature flag ×œ××¢×‘×¨ ×”×“×¨×’×ª×™
4. **Documentation** - ×œ×¢×“×›×Ÿ API docs ×¢× ×›×œ ×©×™× ×•×™
5. **Clean Code** - ××™×Ÿ ×§×•×“ ××ª, ××™×Ÿ ×›×¤×™×œ×•×™×•×ª, ××™×Ÿ ×¨×©×™××•×ª hardcoded

---

## ğŸ¤– ××™×¤×•×™ ×¡×•×›× ×™× ×•×¤×§×•×“×•×ª ×œ×‘×™×¦×•×¢

### ×¡×•×›× ×™× ×–××™× ×™× ×‘×¤×¨×•×™×§×˜

| ×¡×•×›×Ÿ | ×ª×¤×§×™×“ | ××™×§×•× |
|------|-------|-------|
| **@orchestrator** | ×ª×–××•×¨ ×¨××©×™ ×•× ×™×”×•×œ workflow | `.claude/agents/orchestrator.md` |
| **@parallel-work-agent** | ×¢×‘×•×“×” ××§×‘×™×œ×™×ª ×¢× Git Worktrees | `.claude/agents/parallel-work-agent.md` |
| **@backend-agent** | ×¤×™×ª×•×— Backend (FastAPI/Python) | `.claude/agents/backend-agent.md` |
| **@qa-agent** | ×‘×“×™×§×•×ª ××™×›×•×ª ×•×§×•×“ | `.claude/agents/qa-agent.md` |
| **@docs-agent** | ×¢×“×›×•×Ÿ ×ª×™×¢×•×“ | `.claude/agents/docs-agent.md` |
| **@api-sync-agent** | ×¡× ×›×¨×•×Ÿ Backend/Frontend | `.claude/agents/api-sync-agent.md` |
| **@deploy-checker** | ×‘×“×™×§×•×ª ×˜×¨×•×-×¤×¨×™×¡×” | `.claude/agents/deploy-checker.md` |

### ×¤×§×•×“×•×ª ×–××™× ×•×ª

| ×¤×§×•×“×” | ×ª×™××•×¨ | ××™×§×•× |
|-------|-------|-------|
| `/project:refactor` | ×¨×™×¤×§×˜×•×¨×™× ×’ ×§×•×“ | `.claude/commands/refactor.md` |
| `/project:new-feature` | ×¤×™×ª×•×— ×¤×™×¦'×¨ ×—×“×© | `.claude/commands/new-feature.md` |
| `/project:fix-bug` | ×ª×™×§×•×Ÿ ×‘××’×™× | `.claude/commands/fix-bug.md` |
| `/project:pre-deploy` | ×‘×“×™×§×•×ª ×˜×¨×•×-×¤×¨×™×¡×” | `.claude/commands/pre-deploy.md` |
| `/project:parallel-tasks` | ×”×¨×¦×ª ××©×™××•×ª ×‘××§×‘×™×œ | `.claude/commands/parallel-tasks.md` |

---

## ğŸ­ ×ª×•×›× ×™×ª ×‘×™×¦×•×¢ ×¢× ×¡×•×›× ×™×

### Phase 0: × ×™×§×•×™ ×§×•×“ ×™×©×Ÿ

```
@orchestrator
    â”‚
    â”œâ”€â”€ ×¤×§×•×“×”: /project:refactor "× ×™×§×•×™ ××¨×›×™×˜×§×˜×•×¨×ª × ×™×ª×•×— ×™×©× ×”"
    â”‚
    â”œâ”€â”€ @backend-agent: ××—×™×§×ª ×§×‘×¦×™×
    â”‚   â”œâ”€â”€ discipline_detector.py
    â”‚   â”œâ”€â”€ hybrid_detector.py
    â”‚   â”œâ”€â”€ universal_detector.py
    â”‚   â””â”€â”€ openalex_service.py
    â”‚
    â”œâ”€â”€ @backend-agent: × ×™×§×•×™ ×§×•×“ ××ª
    â”‚   â”œâ”€â”€ constants.py (×”×¡×¨×ª DISCIPLINE_KEYWORDS)
    â”‚   â””â”€â”€ utils.py (×”×¡×¨×ª detect_discipline)
    â”‚
    â””â”€â”€ @qa-agent: ×•×™×“×•× ×§×•××¤×™×œ×¦×™×” ×•×‘×“×™×§×•×ª
```

### Phase 1-2: ×‘× ×™×™×ª ×¨×›×™×‘×™× (×¢×‘×•×“×” ××§×‘×™×œ×™×ª)

```
@orchestrator â†’ @parallel-work-agent
    â”‚
    â”œâ”€â”€ ğŸ“ Worktree A: feature/openalex-enhanced
    â”‚   â”‚
    â”‚   â””â”€â”€ @backend-agent:
    â”‚       â”œâ”€â”€ topics.py (Topics API)
    â”‚       â”œâ”€â”€ keywords.py (Keywords extraction)
    â”‚       â””â”€â”€ concepts.py (Concepts analysis)
    â”‚
    â”œâ”€â”€ ğŸ“ Worktree B: feature/smart-analyzer
    â”‚   â”‚
    â”‚   â””â”€â”€ @backend-agent:
    â”‚       â”œâ”€â”€ smart_analyzer.py
    â”‚       â”œâ”€â”€ confidence.py
    â”‚       â””â”€â”€ triggers.py
    â”‚
    â”œâ”€â”€ @qa-agent: ×‘×“×™×§×” ×œ×›×œ worktree ×‘× ×¤×¨×“
    â”‚
    â””â”€â”€ Merge: @parallel-work-agent ×××—×“ ××ª ×”-branches
```

### Phase 3: Gemini Integration

```
@orchestrator
    â”‚
    â”œâ”€â”€ @backend-agent:
    â”‚   â”œâ”€â”€ prompts.py (×¢×“×›×•×Ÿ)
    â”‚   â”œâ”€â”€ analysis.py (×—×“×©)
    â”‚   â”œâ”€â”€ abbreviations.py (×—×“×©)
    â”‚   â””â”€â”€ cost_tracker.py (×—×“×©)
    â”‚
    â””â”€â”€ @qa-agent: ×‘×“×™×§×•×ª ××‘×˜×—×” (API keys, secrets)
```

### Phase 4: ××™× ×˜×’×¨×¦×™×”

```
@orchestrator
    â”‚
    â”œâ”€â”€ @backend-agent: ×¢×“×›×•×Ÿ search.py
    â”‚
    â”œâ”€â”€ @api-sync-agent: ×•×™×“×•× API ×ª×§×™×Ÿ
    â”‚
    â”œâ”€â”€ @qa-agent: ×‘×“×™×§×•×ª ××§×™×¤×•×ª
    â”‚   â”œâ”€â”€ Unit tests
    â”‚   â”œâ”€â”€ Integration tests
    â”‚   â””â”€â”€ Performance tests
    â”‚
    â””â”€â”€ ×¤×§×•×“×”: /project:pre-deploy
```

### Phase 5: ×¡×™×•× ×•×ª×™×¢×•×“

```
@orchestrator
    â”‚
    â”œâ”€â”€ @docs-agent:
    â”‚   â”œâ”€â”€ ×¢×“×›×•×Ÿ CLAUDE.md
    â”‚   â”œâ”€â”€ ×¢×“×›×•×Ÿ API documentation
    â”‚   â””â”€â”€ ×¢×“×›×•×Ÿ PROJECT_MEMORY.md
    â”‚
    â”œâ”€â”€ @deploy-checker: ×‘×“×™×§×•×ª ×¡×•×¤×™×•×ª
    â”‚
    â””â”€â”€ ×¡×™×›×•× ×•-merge ×œ-main
```

---

## ğŸ”„ ×ª×¨×©×™× ×–×¨×™××” ××œ×

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              START                                           â”‚
â”‚                    git checkout -b feature/smart-analysis                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 0: × ×™×§×•×™                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ @orchestrator â†’ /project:refactor                                    â”‚    â”‚
â”‚  â”‚     â”‚                                                                â”‚    â”‚
â”‚  â”‚     â”œâ”€â”€ @backend-agent: ××—×™×§×ª ×§×‘×¦×™× ×™×©× ×™×                           â”‚    â”‚
â”‚  â”‚     â””â”€â”€ @qa-agent: ×•×™×“×•× ×§×•××¤×™×œ×¦×™×”                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  ğŸ“‹ Commit: "refactor: remove legacy analysis code"                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 1-2: ×‘× ×™×™×” (PARALLEL)                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ @parallel-work-agent                                                 â”‚    â”‚
â”‚  â”‚     â”‚                                                                â”‚    â”‚
â”‚  â”‚     â”œâ”€â”€ Worktree A â”€â”€â–º @backend-agent â”€â”€â–º topics.py, keywords.py    â”‚    â”‚
â”‚  â”‚     â”‚                                                                â”‚    â”‚
â”‚  â”‚     â””â”€â”€ Worktree B â”€â”€â–º @backend-agent â”€â”€â–º smart_analyzer.py         â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚     @qa-agent: ×‘×“×™×§×•×ª ×œ×›×œ worktree                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  ğŸ“‹ Commits: "feat: add OpenAlex Topics API", "feat: add SmartAnalyzer"     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 3: Gemini                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ @backend-agent: analysis.py, abbreviations.py, cost_tracker.py      â”‚    â”‚
â”‚  â”‚ @qa-agent: security review                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  ğŸ“‹ Commit: "feat: add Gemini LLM enrichment for paper analysis"            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 4: ××™× ×˜×’×¨×¦×™×”                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ @backend-agent: ×¢×“×›×•×Ÿ search.py                                     â”‚    â”‚
â”‚  â”‚ @api-sync-agent: ×•×™×“×•× API                                          â”‚    â”‚
â”‚  â”‚ @qa-agent: full test suite                                          â”‚    â”‚
â”‚  â”‚ /project:pre-deploy                                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  ğŸ“‹ Commit: "feat: integrate SmartAnalyzer into search flow"                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHASE 5: ×¡×™×•×                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ @docs-agent: ×¢×“×›×•×Ÿ ×ª×™×¢×•×“                                            â”‚    â”‚
â”‚  â”‚ @deploy-checker: final checks                                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  ğŸ“‹ Commit: "docs: update documentation for Smart Analysis Engine"          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              MERGE TO MAIN                                   â”‚
â”‚                         Create Pull Request                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ×¤×§×•×“×•×ª ×œ×”×¤×¢×œ×”

### ×”×ª×—×œ×ª ×”×¢×‘×•×“×”

```bash
# 1. ×™×¦×™×¨×ª branch ×¨××©×™
git checkout -b feature/smart-analysis

# 2. ×”×¤×¢×œ×ª Phase 0
# Call @orchestrator with:
# "×”×ª×—×œ Phase 0 ××ª×•×›× ×™×ª WORK_PLAN_SMART_ANALYSIS.md - × ×™×§×•×™ ×§×•×“ ×™×©×Ÿ"

# 3. ×”×¤×¢×œ×ª Phase 1-2 (××§×‘×™×œ)
# Call @parallel-work-agent with:
# "×”×’×“×¨ worktrees ×œ×¤×™ ×ª×•×›× ×™×ª WORK_PLAN_SMART_ANALYSIS.md Phase 1-2"
```

### ×‘×“×™×§×ª ×”×ª×§×“××•×ª

```bash
# ×¨×©×™××ª worktrees ×¤×¢×™×œ×™×
git worktree list

# ×¡×˜×˜×•×¡ ×‘×›×œ worktree
cd ../find-my-journal-openalex && git status
cd ../find-my-journal-analyzer && git status
```

### ×¡×™×•× ×•× ×™×§×•×™

```bash
# ××™×–×•×’ worktrees
git checkout feature/smart-analysis
git merge feature/openalex-enhanced
git merge feature/smart-analyzer

# × ×™×§×•×™ worktrees
git worktree remove ../find-my-journal-openalex
git worktree remove ../find-my-journal-analyzer
git worktree prune
```

---

*× ×•×¦×¨: ×™× ×•××¨ 2026*
*×’×¨×¡×”: 1.2 - × ×•×¡×£ ××™×¤×•×™ ×¡×•×›× ×™× ×•×¤×§×•×“×•×ª*
